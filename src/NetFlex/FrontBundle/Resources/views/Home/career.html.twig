{% extends 'NetFlexFrontBundle::base_layout.html.twig' %}
{% form_theme careerForm 'NetFlexFrontBundle:FormLayout:user_registration.html.twig' %}
{% block pageTitle %}
    {{ parent() }} : {{ pageTitle }}
{% endblock %}
{% block pageStyles %}
    {{ parent() }}
    <style>
        .help-block {
            text-align: left;
            color: #ff3333;
        }
        .cvError {
            color: #ff3333;
        }
        .succMsg {
            color: #1b7e5a;
        }
    </style>
{% endblock %}
{% block pageContent %}
    <!--TAB FORM-->
    <div class="inner-banner">
        {% image '@NetFlexFrontBundle/Resources/public/images/career-banner.jpg' %}
        <img src="{{ asset_url }}" alt="Career_Banner" />
        {% endimage %}
        <div class="container">
            <div class="row clearfix">
                <div class="col-md-12">
                    <div class="about-txt other-banner">
                        <h2 class="inner-title">careers</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--TAB FORM-->
    <div class="why-franchisee text-center careers-container">
        <div class="container">
            <div class="row clearfix">
                <div class="col-md-10 col-md-offset-1">
                    <div class="heading text-center">
                        <h2><span>Current</span> openings?</h2>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="job-list-inner">
                        <div class="job-list text-left">
                            <h4>Marketing Executive</h4>
                            <ul class="clearfix">
                                <li>Date Posted: <span>Jan1, 2017</span> </li>
                                <li>No. of Vacancies: <span>5</span></li>
                                <li>Application Deadline: <span>Jan 29, 2017</span></li>
                                <li>Location: <span>Kolkata</span></li>
                                <li>Qualification: <span>BSc/BCottm/BA</span></li>
                                <li>Experience: <span>2yrs</span></li>
                            </ul>
                            <h5>Job Description / Responsibility</h5>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum imperdiet ullamcorper nunc laoreet tempor. Mauris lobortis eleifend auctor. Duis velit urna, sodales at sem sit amet, elementum malesuada sapien. Sed maximus justo et tellus sagittis, vitae gravida diam bibendum.</p>
                        </div>
                        <div class="job-list text-left">
                            <h4>Marketing Executive</h4>
                            <ul class="clearfix">
                                <li>Date Posted: <span>Jan1, 2017</span> </li>
                                <li>No. of Vacancies: <span>5</span></li>
                                <li>Application Deadline: <span>Jan 29, 2017</span></li>
                                <li>Location: <span>Kolkata</span></li>
                                <li>Qualification: <span>BSc/BCottm/BA</span></li>
                                <li>Experience: <span>2yrs</span></li>
                            </ul>
                            <h5>Job Description / Responsibility</h5>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum imperdiet ullamcorper nunc laoreet tempor. Mauris lobortis eleifend auctor. Duis velit urna, sodales at sem sit amet, elementum malesuada sapien. Sed maximus justo et tellus sagittis, vitae gravida diam bibendum.</p>
                        </div>
                    </div>
                    <div class="career-form">
                        <div class="col-md-8 col-md-offset-2">
                            <div class="heading text-center">
                                <h2><span>apply</span> here?</h2>
                                <p>All fields are Mandatory. Application without a proper CV will not be considered</p>
                            </div>
                            <div class="career-field">
                                {{ form_start(careerForm, { 'attr': { 'id': 'careerForm', 'novalidate': 'novalidate', 'autocomplete': 'off' } }) }}
                                    <div class="form-group clearfix">
                                        <div class="col-md-6 col-sm-6">
                                            {{ form_widget(careerForm.name, { 'id': 'name', 'required': false, 'attr': { 'class': 'form-control', 'placeholder': 'Full Name', 'oninput': 'validateEmpty(this, "clientError")', 'onblur': 'validateEmpty(this, "clientError")' } }) }}
                                            {{ form_errors(careerForm.name) }}
                                            <span class="help-block clientError" style="display: none;">Name is required</span>
                                        </div>
                                        <div class="col-md-6 col-sm-6">
                                            {{ form_widget(careerForm.email, { 'id': 'applicantEmail', 'required': false, 'attr': { 'class': 'form-control', 'placeholder': 'Email', 'oninput': 'validateEmail(this, "clientError")', 'onblur': 'validateEmail(this, "clientError")' } }) }}
                                            {{ form_errors(careerForm.email) }}
                                            <span class="help-block clientError" style="display: none;">Email is required</span>
                                            <span class="help-block clientError" style="display: none;">Enter a valid email</span>
                                        </div>
                                    </div>
                                    <div class="form-group clearfix">
                                        <div class="col-md-6 col-sm-6">
                                            {{ form_widget(careerForm.contact, { 'id': 'contact', 'required': false, 'attr': { 'class': 'form-control', 'placeholder': 'Contact Number', 'oninput': 'validateEmpty(this, "clientError")', 'onblur': 'validateEmpty(this, "clientError")' } }) }}
                                            {{ form_errors(careerForm.contact) }}
                                            <span class="help-block clientError" style="display: none;">Contact number is required</span>
                                        </div>
                                        <div class="col-md-6 col-sm-6">
                                            {{ form_widget(careerForm.position, { 'id': 'position', 'required': false, 'attr': { 'class': 'form-control', 'placeholder': 'Position Applied For', 'oninput': 'validateEmpty(this, "clientError")', 'onblur': 'validateEmpty(this, "clientError")' } }) }}
                                            {{ form_errors(careerForm.position) }}
                                            <span class="help-block clientError" style="display: none;">Applied position is required</span>
                                        </div>
                                    </div>
                                    <div class="form-group clearfix">
                                        <div class="col-md-12">
                                            {{ form_widget(careerForm.brief, { 'id': 'brief', 'required': false, 'attr': { 'rows': 3, 'class': 'form-control', 'placeholder': 'A brief about you and your experience', 'oninput': 'validateEmpty(this, "clientError")', 'onblur': 'validateEmpty(this, "clientError")' } }) }}
                                            {{ form_errors(careerForm.brief) }}
                                            <span class="help-block clientError" style="display: none;">Brief is required</span>
                                        </div>
                                    </div>
                                    <div class="form-group clearfix">
                                        <div class="col-md-12 custom-btn-field">
                                            <label class="custom-upload">{{ form_widget(careerForm.cv, { 'id': 'cv', 'required': false, 'attr': { 'onchange': 'validateFileUpload(this, "cvError")' } }) }}Upload your CV</label>
                                            {% if careerForm.cv.vars.errors|length %}
                                                <span class="clearfix cvError">{{ careerForm.cv.vars.errors.0.message }}</span>
                                            {% endif %}
                                            <span class="cvError" style="display: none;">Please upload a CV</span>
                                            <span class="cvError" style="display: none;">.doc and .docx files are only allowed</span>
                                            <span class="cvError" style="display: none;">File size cannot exceed 5 Mib</span>
                                            <p class="resume-upload">Saptarshi_CV_updated.docx</p>
                                            <button type="submit" class="btn-apply" onclick="apply(event, this)">Apply</button>
                                        </div>
                                    </div>
                                {{ form_end(careerForm) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% block footer %}
        {{ include('NetFlexFrontBundle:LayoutPartial:footer.html.twig') }}
    {% endblock %}
{% endblock %}
{% block pageScripts %}
    {{ parent() }}
    <script>
        var validateEmail = function(element, messageContainer) {
            var elementValue = element.value;
            var parentElement = element.parentNode;
            var messagesToDisplay = parentElement.getElementsByClassName(messageContainer);

            if (! elementValue) {
                messagesToDisplay[1].style.display = "none";
                messagesToDisplay[0].style.display = "block";

                return false;
            } else {
                messagesToDisplay[0].style.display = "none";

                var emailRegex = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

                if (! emailRegex.test(elementValue)) {
                    messagesToDisplay[1].style.display = "block";

                    return false;
                } else {
                    messagesToDisplay[1].style.display = "none";

                    return true;
                }
            }
        };
        var validateEmpty = function(element, messageContainer) {
            var elementValue = element.value;
            var parentElement = element.parentNode;
            var messagesToDisplay = parentElement.getElementsByClassName(messageContainer);

            if (! elementValue) {
                messagesToDisplay[0].style.display = "block";

                return false;
            } else {
                messagesToDisplay[0].style.display = "none";

                return true;
            }
        };
        var validateFileUpload = function(element, messageContainer) {
            var file = (element.files) ? element.files[0] : null;
            var parentElement = element.parentNode.parentNode;
            var messagesToDisplay = parentElement.getElementsByClassName(messageContainer);

            if (! file) {
                messagesToDisplay[2].style.display = "none";
                messagesToDisplay[1].style.display = "none";
                messagesToDisplay[0].style.display = "block";

                return false;
            } else {
                messagesToDisplay[0].style.display = "none";

                if (("application/msword" !== file.type) && ("application/vnd.openxmlformats-officedocument.wordprocessingml.document" !== file.type)) {
                    messagesToDisplay[2].style.display = "none";
                    messagesToDisplay[1].style.display = "block";

                    return false;
                } else {
                    messagesToDisplay[1].style.display = "none";

                    if (5242880 < file.size) {
                        messagesToDisplay[2].style.display = "block";

                        return false;
                    } else {
                        return true;
                    }
                }
            }
        };
        var apply = function(event, element) {
            event.preventDefault();

            var form = document.getElementById("careerForm");
            var name = document.getElementById("name");
            var email = document.getElementById("applicantEmail");
            var contact = document.getElementById("contact");
            var position = document.getElementById("position");
            var brief = document.getElementById("brief");
            var cv = document.getElementById("cv");
            var formError = false;

            if (! validateEmpty(name, "clientError")) {
                formError = true;
            }

            if (! validateEmail(email, "clientError")) {
                formError = true;
            }

            if (! validateEmpty(contact, "clientError")) {
                formError = true;
            }

            if (! validateEmpty(position, "clientError")) {
                formError = true;
            }

            if (! validateEmpty(brief, "clientError")) {
                formError = true;
            }

            if (! validateFileUpload(cv, "cvError")) {
                formError = true;
            }

            if (! formError) {
                form.submit();
            }
        };
    </script>
{% endblock %}