{% extends 'NetFlexFrontBundle::base_layout.html.twig' %}
{% block pageTitle %}
	{{ parent() }} : {{ pageTitle }}
{% endblock %}
{% block pageStyles %}
	{{ parent() }}
	{% stylesheets 'bundles/netflexdashboard/plugins/bootstrap-modal/css/bootstrap-modal-bs3patch.css'
		'bundles/netflexdashboard/plugins/bootstrap-modal/css/bootstrap-modal.css' filter='cssrewrite' %}
		<link rel="stylesheet" href="{{ asset_url }}">
	{% endstylesheets %}
	<style>
		@media screen {
			#printSection {
				display: none;
			}
		}
		@media print {
			body * {
				visibility:hidden;
			}
			#printSection, #printSection * {
				visibility:visible;
			}
			#printSection {
				position:absolute;
				left:0;
				top:0;
			}
		}
	</style>
{% endblock %}
{% block pageContent %}
	<div class="container">
		<div class="tabform clearfix">
			<div class="TrackHead clearfix">
				<!--title-->
				<div class="col-lg-6">
					<div class="row">
						<h1><span>Shipment</span> Status</h1>
					</div>
				</div>
				<!--title-->
				<!--button-->
				<div class="col-lg-6">
					<div class="row">
						<ul class="printInvoice">
							<li><a href="#full-width" data-toggle="modal">Print Invoice</a></li>
							<li><a href="javascript:void(0);">email Invoice</a></li>
						</ul>
					</div>
				</div>
				<!--button-->
			</div>
			<!--track table-->
			<div class="tracktable clearfix">
				<!--left section-->
				<div class="col-lg-4">
					<div class="row">
						<table width="100%" cellpadding="0" cellspacing="0">
							<tr>
								<td><span>AWB Number :</span></td>
								<td><span>{{ orderDetails.awbNumber }}</span></td>
							</tr>
							<tr>
								<td><span>Order Date :</span></td>
								<td>{{ orderDetails.createdOn|date('j F, Y g:i A') }}</td>
							</tr>
							<tr>
								<td><span>Goods Type :</span></td>
								<td>{{ orderDetails.orderItem.itemPrimaryTypeId.itemTypeName }} > {{ orderDetails.orderItem.itemSecondaryTypeId.itemTypeName }}</td>
							</tr>
							<tr>
								<td><span>Parcel Weight :</span></td>
								<td><span>{{ (orderDetails.orderItem.itemBaseWeight + orderDetails.orderItem.itemAccountableExtraWeight)|number_format(2) }}</span> {{ orderDetails.orderItem.itemWeightUnitId.symbol }}</td>
							</tr>
							<tr>
								<td><span>Risk Type :</span></td>
								<td>{{ ('0.00' == orderDetails.orderPrice.orderCarrierRiskAddedCharge) ? 'Own Risk' : 'Courier Risk' }}</td>
							</tr>
							<tr>
								<td><span>Shipment Type :</span></td>
								<td>{{ orderDetails.deliveryChargeId.deliveryModeTimelineId.deliveryModeId.modeName }}</td>
							</tr>
							<tr>
								<td><span>Payment Option :</span></td>
								<td>{{ ('0.00' == orderDetails.orderPrice.orderCodPaymentAddedCharge) ? 'Non-COD' : 'COD' }}</td>
							</tr>
							<tr>
								<td><span>Shipment Amount :</span></td>
								<td><span>{{ orderDetails.orderPrice.orderPriceUnitId.currencySymbol }} {{ (orderDetails.orderPrice.orderBaseCharge + orderDetails.orderPrice.orderExtraWeightLeviedCharge + orderDetails.orderPrice.orderCodPaymentAddedCharge + orderDetails.orderPrice.orderFuelSurchargeAddedCharge + orderDetails.orderPrice.orderServiceTaxAddedCharge + orderDetails.orderPrice.orderCarrierRiskAddedCharge)|number_format(2) }}</span></td>
							</tr>
						</table>
					</div>
				</div>
				<!--left section-->
				<div class="col-lg-1"><div class="row"></div></div>
				<!--right section-->
				<div class="col-lg-7">
					<div class="row">
						<div class="col-lg-6">
							<div class="row">
								<div class="tblfrom">
									<h2>From</h2>
									<h3>{{ orderDetails.orderAddress.billingFirstName ~ ((orderDetails.orderAddress.billingMidName) ? ' ' ~ orderDetails.orderAddress.billingMidName : ' ' ~ orderDetails.orderAddress.billingLastName) }}</h3>
									<p>
										{{ orderDetails.orderAddress.billingAddressLine1 ~ ((orderDetails.orderAddress.billingAddressLine2) ? ' ' ~ orderDetails.orderAddress.billingAddressLine2 : '') }}<br/>
										{{ orderDetails.orderAddress.billingCityId.name }}, {{ orderDetails.orderAddress.billingStateId.name }} - {{ orderDetails.orderAddress.billingZipCode }}<br/>
										Ph : {{ (orderDetails.orderAddress.billingContactNumber) ? orderDetails.orderAddress.billingContactNumber : 'N/A' }}
									</p>
								</div>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="row">
								<div class="tblto">
									<h2>To</h2>
									<h3>{{ orderDetails.orderAddress.shippingFirstName ~ ((orderDetails.orderAddress.shippingMidName) ? ' ' ~ orderDetails.orderAddress.shippingMidName : ' ' ~ orderDetails.orderAddress.shippingLastName) }}</h3>
									<p>
										{{ orderDetails.orderAddress.shippingAddressLine1 ~ ((orderDetails.orderAddress.shippingAddressLine2) ? ' ' ~ orderDetails.orderAddress.shippingAddressLine2 : '') }}<br/>
										{{ orderDetails.orderAddress.shippingCityId.name }}, {{ orderDetails.orderAddress.shippingStateId.name }} - {{ orderDetails.orderAddress.shippingZipCode }}<br/>
										Ph : {{ orderDetails.orderAddress.shippingContactNumber }}
									</p>
								</div>
							</div>
						</div>
						<!--track status-->
						<div class="col-lg-12">
							<div class="row">
								<div class="trackstatus">
									<ul class="trackHeadline clearfix">
										<li class="approve">Approval</li>
										<li class="process">PROCESSING</li>
										<li class="ship">SHIPPING</li>
										<li class="deliver">DELIVERY</li>
									</ul>
									<ul class="trackbar clearfix">
										<li class="approveLine">
											<a href="#" id="redDotOne"></a>
										
										</li>
										<li class="processLine">
											<a href="#" id="redDotTwo"></a>
											<div id="trackboxTwo">
											</div>
										</li>
										<li class="shipLine">
											<a href="#" id="redDotThree"></a>
											<div id="trackboxThree">
											</div>
										</li>
										<li class="deliverLine"></li>
									</ul>
									
									<div class="arrow_box">
										Your consignment has been processed
									</div>
								
								</div>
							</div>
						</div>
						<!--track status-->
					</div>
				</div>
				<!--right section-->
			</div>
			<!--track table-->
		</div>
	</div>
	<div id="full-width" class="modal container fade" tabindex="-1" style="display: none;">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				&times;
			</button>
			<h4 class="modal-title">Print Invoice</h4>
		</div>
		<div id="printThis" class="modal-body">
			<div class="row">
				<div class="col-md-4"></div>
				<div class="col-md-4">
					{% image '@NetFlexFrontBundle/Resources/public/images/netflexLogo.png' %}
						<img src="{{ asset_url }}" alt="Netflex-logo">
					{% endimage %}
				</div>
				<div class="col-md-4"></div>
			</div>
			<div class="row"><div class="col-md-12">&nbsp;</div></div>
			<div class="row">
				<div class="col-md-4">
					<div class="table-responsive">
						<table class="table table-responsive table-bordered">
							<tbody>
								<tr>
									<th>AWB Number</th>
									<td>
										{{ orderDetails.awbNumber }}
									</td>
								</tr>
								<tr>
									<th>Order Date</th>
									<td>
										{{ orderDetails.createdOn|date('jS F, Y g:i A') }}
									</td>
								</tr>
								<tr>
									<th>Goods Type</th>
									<td>
										{{ orderDetails.orderItem.itemPrimaryTypeId.itemTypeName() }} > {{ orderDetails.orderItem.itemSecondaryTypeId.itemTypeName() }}
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<table class="table table-responsive table-bordered">
											<thead>
											<tr>
												<th colspan="2">Parcel Weight</th>
											</tr>
											</thead>
											<tbody>
											<tr>
												<th>Base Weight</th>
												<td class="right">{{ orderDetails.orderItem.itemBaseWeight|number_format(2) }} {{ orderDetails.orderItem.itemWeightUnitId.symbol }}</td>
											</tr>
											<tr>
												<th>Chargable Extra Weight</th>
												<td class="right">{{ orderDetails.orderItem.itemAccountableExtraWeight|number_format(2) }} {{ orderDetails.orderItem.itemWeightUnitId.symbol }}</td>
											</tr>
											<tr>
												<th>Total</th>
												<td>{{ (orderDetails.orderItem.itemBaseWeight + orderDetails.orderItem.itemAccountableExtraWeight)|number_format(2) }} {{ orderDetails.orderItem.itemWeightUnitId.symbol }}</td>
											</tr>
											</tbody>
										</table>
									</td>
								</tr>
								<tr>
									<th>Risk Type</th>
									<td>
										{{ ('0.00' == orderDetails.orderPrice.orderCarrierRiskAddedCharge) ? 'Own Risk' : 'Courier Risk' }}
									</td>
								</tr>
								<tr>
									<th>Shipment Type</th>
									<td>
										{{ orderDetails.deliveryChargeId.deliveryModeTimelineId.deliveryModeId.modeName }}
									</td>
								</tr>
								<tr>
									<th>Payment Option</th>
									<td>
										{{ ('0.00' == orderDetails.orderPrice.orderCodPaymentAddedCharge) ? 'Non-COD' : 'COD' }}
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<table class="table table-responsive table-bordered">
											<thead>
											<tr>
												<th colspan="2">Shipment Amount</th>
											</tr>
											</thead>
											<tbody>
											<tr>
												<th>Base Price</th>
												<td class="right">{{ orderDetails.orderPrice.orderPriceUnitId.currencySymbol }} {{ orderDetails.orderPrice.orderBaseCharge|number_format(2) }}</td>
											</tr>
											{% if orderDetails.orderPrice.orderExtraWeightLeviedCharge %}
												<tr>
													<th>Extra Weight Charge</th>
													<td class="right">{{ orderDetails.orderPrice.orderPriceUnitId.currencySymbol }} {{ orderDetails.orderPrice.orderExtraWeightLeviedCharge|number_format(2) }}</td>
												</tr>
											{% endif %}
											{% if '0.00' != orderDetails.orderPrice.orderFuelSurchargeAddedCharge %}
												<tr>
													<th>Added Fuel Surcharge</th>
													<td class="right">{{ orderDetails.orderPrice.orderPriceUnitId.currencySymbol }} {{ orderDetails.orderPrice.orderFuelSurchargeAddedCharge|number_format(2) }}</td>
												</tr>
											{% endif %}
											{% if '0.00' != orderDetails.orderPrice.orderServiceTaxAddedCharge %}
												<tr>
													<th>Added Service Tax</th>
													<td class="right">{{ orderDetails.orderPrice.orderPriceUnitId.currencySymbol }} {{ orderDetails.orderPrice.orderServiceTaxAddedCharge|number_format(2) }}</td>
												</tr>
											{% endif %}
											{% if '0.00' != orderDetails.orderPrice.orderCodPaymentAddedCharge %}
												<tr>
													<th>COD Amount</th>
													<td class="right">{{ orderDetails.orderPrice.orderPriceUnitId.currencySymbol }} {{ orderDetails.orderPrice.orderCodPaymentAddedCharge|number_format(2) }}</td>
												</tr>
											{% endif %}
											{% if '0.00' != orderDetails.orderPrice.orderCarrierRiskAddedCharge %}
												<tr>
													<th>Courier Risk Charge</th>
													<td class="right">{{ orderDetails.orderPrice.orderPriceUnitId.currencySymbol }} {{ orderDetails.orderPrice.orderCarrierRiskAddedCharge|number_format(2) }}</td>
												</tr>
											{% endif %}
											<tr>
												<th>Total</th>
												<td class="right">{{ orderDetails.orderPrice.orderPriceUnitId.currencySymbol }} {{ (orderDetails.orderPrice.orderBaseCharge + orderDetails.orderPrice.orderExtraWeightLeviedCharge + orderDetails.orderPrice.orderCodPaymentAddedCharge + orderDetails.orderPrice.orderCarrierRiskAddedCharge + orderDetails.orderPrice.orderFuelSurchargeAddedCharge + orderDetails.orderPrice.orderServiceTaxAddedCharge)|number_format(2) }}</td>
											</tr>
											</tbody>
										</table>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-md-8">
					<div class="row">
						<div class="col-md-6 table-responsive">
							<table class="table table-responsive table-bordered">
								<thead>
								<tr>
									<th>From</th>
								</tr>
								</thead>
								<tbody>
								<tr>
									<th>{{ orderDetails.orderAddress.billingFirstName ~ ((orderDetails.orderAddress.billingMidName) ? ' ' ~ orderDetails.orderAddress.billingMidName : '') ~ ' ' ~ orderDetails.orderAddress.billingLastName }}</th>
								</tr>
								<tr>
									<td>{{ orderDetails.orderAddress.billingAddressLine1 ~ ((orderDetails.orderAddress.billingAddressLine2) ? '; ' ~ orderDetails.orderAddress.billingAddressLine2 : '') }}</td>
								</tr>
								<tr>
									<td>{{ orderDetails.orderAddress.billingCityId.name ~ ', ' ~ orderDetails.orderAddress.billingStateId.name ~ ' - ' ~ orderDetails.orderAddress.billingZipCode }}</td>
								</tr>
								<tr>
									<td>Ph: {{ orderDetails.orderAddress.billingContactNumber }}</td>
								</tr>
								</tbody>
							</table>
						</div>
						<div class="col-md-6 table-responsive">
							<table class="table table-responsive table-bordered">
								<thead>
								<tr>
									<th>To</th>
								</tr>
								</thead>
								<tbody>
								<tr>
									<th>{{ orderDetails.orderAddress.shippingFirstName ~ ((orderDetails.orderAddress.shippingMidName) ? ' ' ~ orderDetails.orderAddress.shippingMidName : '') ~ ' ' ~ orderDetails.orderAddress.shippingLastName }}</th>
								</tr>
								<tr>
									<td>{{ orderDetails.orderAddress.shippingAddressLine1 ~ ((orderDetails.orderAddress.shippingAddressLine2) ? '; ' ~ orderDetails.orderAddress.shippingAddressLine2 : '') }}</td>
								</tr>
								<tr>
									<td>{{ orderDetails.orderAddress.shippingCityId.name ~ ', ' ~ orderDetails.orderAddress.shippingStateId.name ~ ' - ' ~ orderDetails.orderAddress.shippingZipCode }}</td>
								</tr>
								<tr>
									<td>Ph: {{ orderDetails.orderAddress.shippingContactNumber }}</td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button type="button" id="print-button" class="btn btn-primary">
				<i class="fa fa-print"></i> Print
			</button>
			<button type="button" data-dismiss="modal" class="btn btn-primary">
				<i class="fa fa-times"></i> Cancel
			</button>
		</div>
	</div>
	{% block footer %}
		{{ include('NetFlexFrontBundle:LayoutPartial:footer.html.twig') }}
	{% endblock %}
{% endblock %}
{% block pageScripts %}
	{{ parent() }}
	{% javascripts '@NetFlexDashboardBundle/Resources/public/plugins/bootstrap-modal/js/bootstrap-modal.js'
		'@NetFlexDashboardBundle/Resources/public/plugins/bootstrap-modal/js/bootstrap-modalmanager.js' %}
		<script src="{{ asset_url }}"></script>
	{% endjavascripts %}
	<script>
		function printElement(elem) {
			var domClone = elem.cloneNode(true);
			
			var $printSection = document.getElementById("printSection");
			
			if (!$printSection) {
				var $printSection = document.createElement("div");
				$printSection.id = "printSection";
				document.body.appendChild($printSection);
			}
			
			$printSection.innerHTML = "";
			$printSection.appendChild(domClone);
			window.print();
		}
		
		jQuery("#print-button").click(function(e) {
			printElement(document.getElementById("printThis"));
		});
	</script>
{% endblock %}